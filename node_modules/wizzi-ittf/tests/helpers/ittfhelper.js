// generator: wizzi-lab-artifatcs/lib/js/module/gen/main.js, utc time: Thu, 22 Oct 2015 19:39:44 GMT
var md = module.exports = {};

md.matchPath = function(path, ittfNode) {
    var parts = path.split('.');
    var kind = 0;
    var node = ittfNode;
    var i, i_len=parts.length, part;
    for (i=0; i<i_len; i++) {
        part = parts[i];
        console.log('part,kind', part, kind);
        if (part === '$') {
            kind = 2;
        }
        else if (kind === 0) {
            if (node.n.trim() === part) {
                kind = 1;
            }
            else {
                console.log('failed name test', node.n.trim());
                return false;
            }
        }
        else if (kind === 1) {
            var index = parseInt(part);
            if (node.childs.length < index - 1) {
                return false;
            }
            node = node.childs[index];
            kind = 0;
        }
        else if (kind === 2) {
            return node.v.trim() === part;
        }
    }
    return true;
};

md.matchPath2 = function(path, ittfNode) {
    var parts = path.split('.');
    var kind = 0;
    var node = ittfNode;
    var i, i_len=parts.length, part;
    for (i=0; i<i_len; i++) {
        part = parts[i];
        console.log('part,kind', part, kind);
        if (part === '$') {
            kind = 2;
        }
        else if (kind === 0) {
            if (node.name.trim() === part) {
                kind = 1;
            }
            else {
                console.log('failed name test', node.name.trim());
                return false;
            }
        }
        else if (kind === 1) {
            var index = parseInt(part);
            if (node.childs.length < index - 1) {
                return false;
            }
            node = node.childs[index];
            kind = 0;
        }
        else if (kind === 2) {
            return node.value.trim() === part;
        }
    }
    return true;
};
