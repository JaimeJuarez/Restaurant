// generator: wizzi-lab-artifatcs/lib/js/module/gen/main.js, utc time: Thu, 22 Oct 2015 19:39:40 GMT

/**
     WizziModelProduction
     script for generating WizziModelTypes and WizziModelFactories
     of this WizziFactoryPackage.
*/

var util = require('util');
var path = require('path');
var schema = require('wizzi-schema');

var packageName = 'wizzi-schema';

var wizziSchemaFolder = path.join(__dirname, 'lib', 'wizzi', 'schemas');
var wizziSchemaLabFolder = path.join(__dirname, 'lib', 'wizzi', 'schemas', 'lab');
var wizziModelFolder = path.join(__dirname, 'lib', 'wizzi', 'models');

function generate(name) {
    var schemaIttfDocumentPath = path.join(wizziSchemaFolder, name + '.wizzischema.ittf');
    var modelPath = path.join(wizziModelFolder, name + '-model.g.js');
    var loaderPath = path.join(wizziModelFolder, name + '-loader.g.js');
    var labPath = path.join(wizziSchemaLabFolder, name + '-test.g.js');
    var jsondocsPath = path.join(wizziModelFolder, name + '-schema.g.json');
    var htmldocsPath = path.join(wizziModelFolder, name + '-schema.g.html');
    schema.executeSchemaGenerationProcess(schemaIttfDocumentPath, modelPath, loaderPath, labPath, jsondocsPath, htmldocsPath, {}, function(err, result) {
        if (err) {
            throw new Error('Package: ' + packageName + '.WizziModelProduction error: ' + util.inspect(err, { depth: null }));
        }
    });
}

// Expose the execute (WizziModelProductions) function
var md = module.exports = {};

md.execute = function() {
    generate('wizzischema');
};

// CLI execution
md.execute();
