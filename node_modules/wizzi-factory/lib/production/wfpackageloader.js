// generator: wizzi-lab-artifatcs/lib/js/module/gen/main.js, utc time: Thu, 22 Oct 2015 19:39:41 GMT
var util = require('util');
var path = require('path');
var verify = require('wizzi-core').verify;
var log = require('wizzi-core').log(module);
var file = require('wizzi-core').file;
var md = module.exports = {};

md.load = function(pkgName, cwd) {
    var result;
    // try fullpath
    try {
        console.log('try fullpath ', pkgName);
        result = require(pkgName);
        console.log('found fullpath ', pkgName);
        return result;
    } catch (ex) {
        console.log("ex" + " " + util.inspect(ex, { depth: null}));
    }
    console.log('Is not a full path');
    var localNodeModule = findUpFolder(cwd, 'node_modules');
    if (localNodeModule) {
        console.log('try in ', localNodeModule);
        var pkgLocalPath = path.join(localNodeModule, pkgName);
        try {
            result = require(pkgLocalPath);
            return result;
        } catch (ex) {
            console.log("ex" + " " + util.inspect(ex, { depth: null}));
        }
    }
    else {
        console.log('node_modules not found in cwd', cwd);
    }
};
function findUpFolder(basePath, folderName) {
    var test = path.join(basePath, folderName);
    if (file.isDirectory(test)) {
        return test;
    }
    basePath = path.dirname(basePath);
    if (basePath.length > 3) {
        return findUpFolder(basePath, folderName);
    }
    else {
        return null;
    }
}
