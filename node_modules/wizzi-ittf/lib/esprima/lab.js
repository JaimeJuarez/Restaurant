var util = require('util');
var Context = require('./jscontext').context;
var jsrunner = require('./jsrunner');
var ScriptCoder = require('./scriptcoder').ScriptCoder;

var code = new ScriptCoder();
code.w('var a;');
code.w('var b = 1;');
code.w('var c, X d, e = 2;');
code.w('a = 3;');
code.w('var f = null;');
code.w('var dd = 2;');

var ctx = new Context();
try
{
    jsrunner(code.toCode(), ctx);
    var ret = ctx.get('a');
    console.log('ret', ret);
} catch (ex) {
    console.log('ex:', util.inspect(ex, { depth: null }));
    console.log('ex.lineNumber', ex.lineNumber);
    console.log('code.getErrorLines', code.getErrorLines(ex).join('\n'));
}